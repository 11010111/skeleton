<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
  xmlns:ce="http://typo3.org/ns/TYPO3/CMS/FluidStyledContent/ViewHelpers" data-namespace-typo3-fluid="true">

<f:asset.css identifier="textpic" href="EXT:skeleton/Resources/Public/Css/textpic.css" />

<skeleton:wrapper render="{data}" class="textpic">
  <skeleton:container render="{data}">
    <div class="textpic-wrapper textpic-{gallery.position.vertical}-{gallery.position.horizontal}{f:if(condition:'{gallery.position.noWrap}',then:'-flex')}">
      <f:if condition="{gallery.position.vertical} != 'below' && !{gallery.position.noWrap}">
        <div class="textpic-images">
          <f:render section="Files" arguments="{_all}" />
        </div>
      </f:if>

      <f:render partial="Rte" arguments="{_all}" />

      <f:if condition="{gallery.position.vertical} == 'below' || {gallery.position.noWrap}">
        <div class="textpic-images">
          <f:render section="Files" arguments="{_all}" />
        </div>
      </f:if>
    </div>
  </skeleton:container>
</skeleton:wrapper>

<f:section name="Files">
  <f:for each="{files}" as="file">
    <f:if condition="{data.image_zoom} && !{file.link}">
      <f:then>
        <ce:link.clickEnlarge image="{file}" configuration="{settings.media.popup}">
          <f:render partial="Picture" arguments="{_all}" />
        </ce:link.clickEnlarge>
      </f:then>
      <f:else>
        <f:render partial="Picture" arguments="{_all}" />
      </f:else>
    </f:if>
  </f:for>
</f:section>

</html>